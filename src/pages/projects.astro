---
import BaseLayout from "../components/layout/BaseLayout.astro";
import { ExternalLink, BookIcon, VideoIcon } from "lucide-react";
import { ICONS } from "@/constants/icons";
import { PROJECTS } from "@/constants/content";
---

<BaseLayout title="Projects" description="My Recent Projects">
  <main class="max-w-5xl mx-auto px-4">
    <h1 class="text-4xl font-bold text-white text-center mb-12">Projects</h1>

    <div class="space-y-12">
      {
        PROJECTS.map((project) => (
          <div class="bg-neutral-900/50 rounded-xl overflow-hidden hover:bg-neutral-900/70 transition-colors duration-300">
            <div class="flex flex-col md:flex-row">
              {/* Image */}
              <div class="w-full md:w-2/5">
                <img
                  src={project.image}
                  alt={project.title}
                  class="w-full h-full object-cover min-h-[200px] md:min-h-[300px]"
                />
              </div>

              {/* Content */}
              <div class="w-full md:w-3/5 p-6 md:p-8 flex flex-col">
                <h3 class="text-2xl font-bold text-white mb-1">
                  {project.title}
                </h3>

                {/* Subheader */}
                {project.subheader && (
                  <p class="text-neutral-500 mb-4 text-sm">
                    {project.subheader}
                  </p>
                )}

                <hr class="border-t border-neutral-800 w-full" />

                {/* Description Points */}
                <ul class="my-4 text-neutral-300 transition-colors duration-200 list-none flex-grow">
                  {project.description.map((point) => (
                    <li class="mb-2 pl-5 relative">
                      <span class="absolute left-0 top-1.5 w-1.5 h-1.5 bg-purple-400 rounded-full" />
                      <span class="bullet-text">{point}</span>
                    </li>
                  ))}
                </ul>

                {/* Tags */}
                <div class="flex flex-wrap gap-2 mb-6">
                  {project.tags.map((tag) => (
                    <span class="px-3 py-1 bg-neutral-800 rounded-full text-sm text-neutral-300 hover:text-purple-400 transition-colors duration-200 cursor-default">
                      {tag}
                    </span>
                  ))}
                </div>

                <hr class="border-t border-neutral-800 w-full" />

                {/* Action Buttons - Modified for mobile */}
                <div class="flex flex-wrap gap-3 w-full justify-end pt-6">
                  {project.videoUrl && (
                    <a
                      href={project.videoUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="flex items-center gap-2 px-3 py-2 border rounded-lg hover:text-white transition-all duration-200 text-sm sm:text-base"
                    >
                      <VideoIcon size={16} />
                      <span>Video</span>
                    </a>
                  )}

                  {project.documentation && (
                    <a
                      href={project.documentation}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="flex items-center gap-2 px-3 py-2 border rounded-lg hover:text-white transition-all duration-200 text-sm sm:text-base"
                    >
                      <BookIcon size={16} />
                      <span>Docs</span>
                    </a>
                  )}

                  {project.github && (
                    <a
                      href={project.github}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="flex items-center gap-2 px-3 py-2 bg-neutral-800 rounded-lg text-white hover:bg-neutral-700 transition-colors duration-200 text-sm sm:text-base"
                    >
                      <ICONS.SOCIAL.GITHUB size={16} />
                      <span>GitHub</span>
                    </a>
                  )}

                  {project.preview && (
                    <a
                      href={project.preview}
                      target="_blank"
                      rel="noopener noreferrer"
                      class="flex items-center gap-2 px-3 py-2 border border-purple-500 rounded-lg text-purple-500 hover:bg-purple-500 hover:text-white transition-all duration-200 text-sm sm:text-base"
                    >
                      <ExternalLink size={16} />
                      <span>Preview</span>
                    </a>
                  )}
                </div>
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </main>
</BaseLayout>

<style>
  /* Properly align bullet text */
  .bullet-text {
    display: inline-block;
    margin-left: 0;
    width: calc(100% - 5px);
    vertical-align: top;
    line-height: 1.5;
  }

  li {
    text-indent: 0;
    display: flex;
  }

  li span.absolute {
    margin-top: 0.12em; /* Adjust this value for perfect vertical alignment */
  }
</style>
